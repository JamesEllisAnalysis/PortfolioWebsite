    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Airbnb Analysis Project</title>
        <link rel="stylesheet" href="style.css">
        <style>
            body.project-page {
                background-color: black;
                color: white;
            }
            #header.project-page {
                height: 80px; /* You can adjust this value as per your needs */
                background-image: none;
            }
            #header.project-page .container nav {
                height: 100%;
                display: flex;
                justify-content: space-between; /* This is to align your navigation menu to the right */
            }

        </style>
        <script src="https://kit.fontawesome.com/c4254e24a8.js" crossorigin="anonymous"></script>
    </head>
    <body class="project-page">
    <div id="header" class="project-page">
        <div class="container">
            <nav>
                <div class="empty-space"></div>
                <ul id="sidemenu">
                    <li><a href="index.html#header">Home</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#services">Services</a></li>
                    <li><a href="index.html#portfolio">Portfolio</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                    <i class="fas fa-times" onclick="closemenu()"></i>
                </ul>
                <i class="fas fa-bars" onclick="openmenu()"></i>
            </nav>
        </div>
    </div>

    <div class="container"> <!-- Start of content container -->

        <h1 style="margin-bottom: 45px;  "> From Data to Decisions: Exploring how Machine Learning can be utilized to help solve a business problem.</h1>
        <h2 style="margin-bottom: 10px; ; color: #2393fa ">Summary </h2>
        <p style="margin-bottom: 15px;  "> The rise of machine learning and artificial intelligence has opened increasing avenues for businesses to use data in problem-solving. As I have progressed in my studies of modern analytical techniques, I found that it can be easy to focus excessively on technical details or model performance and lose sight of the underlying objective. I realized that there were endless models, mathematical techniques and tools to learn and wanted to avoid falling into the trap of possessing a shed full of tools which I had no reason to purchase.</p>
        <p style="margin-bottom: 15px;  "> In this project, I created an intuitive business scenario where a business could realize value from utilizing some of the machine learning techniques I have been studying. The intent of this project is not to create the best machine learning model, but rather to build an understanding of their use cases by demonstrating the process and context within which such techniques could create value.   </p>
        <p style="margin-bottom: 30px;">
            
        <h2 style="margin-bottom: 10px; ; color: #2393fa ">Scenario </h2>
        <p style="margin-bottom: 15px" >The scenario is that a new telecommunication company in New Zealand, ‘Spork’ is operating on a contract-based business model and exploring ways to increase its revenues. The business analyst analyzes potential strategies and identifies three options:</p>
        <ol style="margin-bottom: 15px; padding-left: 30px;">
        <li style="font-size: 15px;margin-bottom: 10px;"> Increase marketing efforts to aquire new customers</li>
        <li style="font-size: 15px;margin-bottom: 10px;"> Upsell existing customers </li>
        <li style="font-size: 15px;margin-bottom: 10px;"> Increase the retention rate of existing customers</li>
        </ol>
        <p style="margin-bottom: 15px" >Determining which is the best strategy to pursue involves building an understanding of the context of the business problem. The telecommunication industry in the region is incredibly competitive and the data on customer acquisition costs may present an undesirable level of risk involved in launching a new marketing campaign. A previous business analysis initiative has documented that the business has limited upselling opportunities and previous efforts have led to customer backlash and the strategy has been ruled out entirely. </p>
        <p style="margin-bottom: 30px" >After consulting with the relevant stakeholders, the business analyst wants to investigate the third option and has been requested to create a business case for developing and deploying a machine learning model to increase revenues. The business analyst is provided with some sample data from the companies' internal customer database.</p>

        <h2 style="margin-bottom: 10px; ; color: #2393fa ">Data </h2>
        <p style="margin-bottom: 15px" >The data is a sample of open-source data from an unnamed telecommunications company made available to the public on Kaggle. </p>
        <p style="margin-bottom: 30px" >In the context of this project, we will assume that it contains customer information from ‘Spork’ for the last contract period retrieved from their relational database system. There are 3333 observations where information is provided on customer information such as total minutes, total charges, type of plan and whether the customer continued or canceled their plan i.e churned. The business analyst has been assured that the data is generally representative of the last two years of business.</p>

        <h2 style="margin-bottom: 15px; ; color: #2393fa ">Approach </h2>
        <h4 style="margin-bottom: 15px; ; color: #2393fa "> 1. Defining the need and assessing requirements </h4>
        <p style="margin-bottom: 15px" > The business objective in this scenario is to increase revenues. We are testing the hypothesis that revenues could be increased by reducing the number of customers that leave by identifying them early and convincing them to stay. Estimates and calculations should be made to estimate whether the ROI on such an initiative would be greater than launching a new marketing campaign.  </p>
        <p style="margin-bottom: 30px" > The model below can help to begin identifying requirements and build an initial understanding how the business objective can be met: </p>
        <img src="images/workflow.svg.svg" alt="Summary of Key Findings" width="700" height="350" style="display: block; margin-left: auto; margin-right: auto; margin-bottom: 30px;">
         <p style="margin-bottom: 15px" > Evaluating this workflow helps in devising the necessary questions to be asked in order for such a solution to provide the required value, such as:</p>
         <ol style="margin-bottom: 15px; padding-left: 20px;">
            <li style="font-size: 15px; margin-bottom: 10px; "> Is the problem of customer churn sufficiently large, or the opportunity for optimization sufficient? </li>
            <li style="font-size: 15px; margin-bottom: 10px;"> What data is required to develop the machine learning models? Do we have sufficient data and the necessary capabilities to deploy such a model? </li>
            <li style="font-size: 15px; margin-bottom: 30px; "> What are the risks involved with the initiative, are the costs of failure high? </li>
        </ol>
        

         <p style="margin-bottom: 30px" > </p>
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 2. Exploratory Data Analysis - is customer churn a problem?</h4>
    <p style="margin-bottom: 30px" > A good first step is to review the data and extract insights about customer churn. Using python to visualize the distributions of churned and non-churned customers, it is observed that out of the sample of 3333 customers, 483 did not renew their contracts accounting for a 14.5% churn rate. A figure of 14.5% is discovered to be a little high for the industry and region, and after consulting with the customer retention team it is estimated that 60% of these customers could be persuaded to stay if they were provided with the necessary information.  </p>
    <img src="images/churnedcount.jpg" alt="Summary of Key Findings" width="400" height="300" style="display: block; margin-left: auto; margin-right: auto; margin-bottom: 45px;">
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 3. Is the data sufficient to develop an effective model?</h4>
    <p style="margin-bottom: 30px" > In order for machine learning to produce value, we would expect to see at least some differences in the distribution of variables for churned and non-churned customers. By calculating the averages of the metrics collected by the company for customers in each group we can get some indication of whether a machine learning model would be effective. Visualizing  the data, it is observed that there appear to be some key differences in the characteristics of churned vs retained customers such as the number of customer service calls and total minutes of calltime.  </p>
    <img src="images/churn5.jpg" alt="Summary of Key Findings" width="800" height="450" style="display: block; margin-left: auto; margin-right: auto; margin-bottom: 15px;">
    <p style="margin-bottom: 45px" > A little over 3000 observations is not a great quantity of data to train a model on, but as long as the sample is representative of the population, there is reason to suggest building a prototype model machine learning model will give us a good estimate of what can be achieved.  </p>
    
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 4. Building a prototype predictive model</h4>
    <p style="margin-bottom: 15px" >Provided a situation where historical data is made available on customer characteristics for both churned and retained customers, predicting customer churn is a binary classification problem. </p>
    <p style="margin-bottom: 15px" >I prepared the data for a number of logistic regression/classification models. Categorical variables were encoded using one-hot encoding and standardscaler() from the scikit-learn library was used to standardize all variables. The data was then split into training and test sets using a ratio of 80/20 to produce sets of 2666 and 667 observations respectively. Because the dataset was heavily imbalanced in terms of class distributions, I stratified the data to ensure that the training and test sets were split with the same distribution of class values.  </p>
    <p style="margin-bottom: 30px" > The test data was looped through and fitted to a number of models that are commonly used for predicting a binary outcome of a categorical variable. The models used and their relevant evaluation metrics are outlined in the table below:</p>

    <!DOCTYPE html>
<html>
<head>
    <style>
        table {
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 45px;
            width: 40%;  /* You can adjust this value */
        }
        th, td {
            padding: 1px;  /* You can adjust this value */
            ;
        }
    </style>
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>Model</th>
                <th>Accuracy</th>
                <th>F1 Score</th>
                <th>Recall Score</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Nearest Neighbors</td>
                <td>0.89</td>
                <td>0.73</td>
                <td>0.39</td>
            </tr>
            <tr>
                <td>Linear SVM</td>
                <td>0.85</td>
                <td>0.46</td>
                <td>0.00</td>
            </tr>
            <tr>
                <td>RBF SVM</td>
                <td>0.85</td>
                <td>0.46</td>
                <td>0.00</td>
            </tr>
            <tr>
                <td>Decision Tree</td>
                <td>0.94</td>
                <td>0.86</td>
                <td>0.67</td>
            </tr>
            <tr>
                <td>Random Forest</td>
                <td>0.91</td>
                <td>0.76</td>
                <td>0.41</td>
            </tr>
            <tr>
                <td>Neural Net</td>
                <td>0.93</td>
                <td>0.85</td>
                <td>0.61</td>
            </tr>
            <tr>
                <td>AdaBoost</td>
                <td>0.88</td>
                <td>0.70</td>
                <td>0.37</td>
            </tr>
            <tr>
                <td>Naive Bayes</td>
                <td>0.85</td>
                <td>0.70</td>
                <td>0.46</td>
            </tr>
            <tr>
                <td>QDA</td>
                <td>0.86</td>
                <td>0.71</td>
                <td>0.47</td>
            </tr>
            <tr>
                <td>XGBoost</td>
                <td>0.96</td>
                <td>0.91</td>
                <td>0.78</td>
            </tr>
            <tr>
                <td>LightGBM</td>
                <td>0.96</td>
                <td>0.91</td>
                <td>0.76</td>
            </tr>
        </tbody>
    </table>
</body>
</html>

    
    
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 5. Model Selection</h4>
    <p style="margin-bottom: 15px" > For classification tasks we would normally be concerned with evaluating a model's accuracy score, but in the context of our business problem we are particularly concerned with minimizing the incidence of failing to predict when a customer will churn (Type II error) which is captured by the recall score. Additionally, due to the imbalanced class distributions noted above it would also be wise to look at the F-1 Score which takes the harmonic mean of precision and recall. </p>

    <p style="margin-bottom: 45px" > Based on the sample data, the best fit measured by both accuracy and F1 score is produced by the XGBoost and LightGBM models, with XGboost having a slight higher recall score (0.78 compared with 0.76). XGboost is a versatile machine learning model which utilizes boosting to create and add decision trees sequentially where each new iteration attempts correct the mistakes made by its predecessor.</p>
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 6. Extreme Gradient Boosting - Interpreting Model Results</h4>

    <p style="margin-bottom: 15px" > The confusion matrix for the model predictions provides useful information for us to understand its performance in the context of our business problem. We can see that for the 667 unseen observations (data that the model was not trained on), 79 customers would have been correctly predicted to churn and there would have been six instances of customers who did not churn who would have been falsely predicted to (Type I error). In our scenario, the risks associated with making a type I error are relatively minor, as mislabeled customers would simply be passed on to the customer retention team. The error of greater relevance to the business problem is a type II error where the model fails to identify a customer who churned. In this case there were 22 instances of type II error meaning that 76% of customers who churned were able to be identified prior to the expiration of their contract.</p>
    
    
    <img src="images/confusion.jpg" alt="Summary of Key Findings" width="600" height="450" style="display: block; margin-left: auto; margin-right: auto; margin-bottom: 60px;">
    
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> 7. Understanding the model and relating back to the business problem </h4>
    
    <p style="margin-bottom: 30px" >  The draft model based on the sample data suggests that somewhere in the realm of 70-80% of customers who leave the service can be predicted in advance which can certainly be used to help increase revenues. However, rather than relying on a black box model, looking under the hood and understanding the process with which the predictions are made can help with evaluation and even give us insights on the root cause of the problem. This was be done by utilizing graphviz from within python to visualize the decision tree used by the model:</p>
    <h4 style="margin-bottom: 10px; text-align: center;"> XGBoost Decision Tree</h4>
    <img src="images/decisiontree.png" alt="Summary of Key Findings" width="700" height="350" style="display: block; margin-left: auto; margin-right: auto; margin-bottom: 30px; border: 2px solid #2393fa;">
    <p style="margin-bottom: 45px" >  The diagram illustrates how the model identifies potential churn customers. Through standardizing our variables with StandardScaler(), interpreting the decision nodes' variable values necessitates evaluating the values in terms of standard deviations away from the mean. Notably, the largest subset of data points classed as 'churn' were those where 'total day charge' were below -0.11 standard deviations from the mean, and 'customer service calls' exceeded the mean by more than 1.47 standard deviations. Beyond the value proposed by the model's predictive abilities, interpreting the decision process utilized by the model and verifying it with relevant subject matter experts could help validate it and provide additional value.
    </p>
    
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> Solution evaluation and making a decision </h4>
    <p style="margin-bottom: 15px">Although the model is a prototype and there may be significant work remaining in terms of optimizing its configuration, training it on additional data and deploying it, we can now make a significantly more informed decision on what the optimal strategy is to increase revenues. 
    </p>
    <p style="margin-bottom: 15px">Conservatively estimating a 75% accuracy rate in identifying churn customers, and multiplying it by the estimated 60% figure provided by customer retention team it is more than feasible that customer churn could be reduced by 45% or more. If we assume that Spork has 400,000 customers and apply the churn rate of 14.5%, 0.45 x 400,000 x 0.145 = 26,100 customers worth of additional revenue could be generated each period for the lifetime of the solution. We would then estimate the costs involved in developing, deploying and maintaining the solution at scale to estimate ROI. </p>
    <p style="margin-bottom: 45px">This could then be compared with estimates of the ROI of increasing marketing efforts to attract more customers and used in conjunction with other factors such as risks and time frames to select the best option. </p>
    
    <h4 style="margin-bottom: 10px; ; color: #2393fa "> Concluding remarks </h4>
    <p style="margin-bottom: 15px"> The analysis conducted in this project was not intended to be exhaustive but merely served as an exercise in demonstrating my analytical process as well as building an understanding of how some of the techniques I have been studying could be applied in a business context.</p>
    <p style="margin-bottom: 15px">There are certainly improvements that could be made to the model building process including evaluation of ROC/AUC scores and tuning of hyperparameters. There are certain limitations and solutions to address them that I would have liked to explore if I had more time.  </p>
    
    <p style="margin-bottom: 30px;">
        All data analysis and model creation was done in Python, and can be viewed in the form of an Ipython notebook 
        <a href="https://github.com/Jimbobob3145/Portfolio-Projects/blob/main/Using%20Machine%20Learning%20to%20Solve%20a%20Business%20problem/Portfolio%20Project%20-%20Telecoms%20Customer%20Churn.ipynb" style="font-weight: bold; color: #2393fa;" target="_blank">here</a>:
        </p>
        
  